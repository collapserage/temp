<html>
	<head>
		<meta charset="utf-8">
		<style>
			body {
				margin: 0;
			}

			#ninjaX, #ninjaY {
				position: fixed;
			}

			#ninjaX {
				top: calc(50% + 10px);
				left: calc(50% + 100px);
			}

			#ninjaY {
				bottom: calc(50% + 100px);
				left: calc(50% - 40px);
			}
		</style>
	</head>
	
	<body>
		<canvas></canvas>
		<div id="ninjaX">100</div>
		<div id="ninjaY">100</div>
		
		<script>
			const PIXEL = 30;

			new class FromVector {
				constructor() {
					this.canvas = document.querySelector('canvas');
					this.ctx = this.canvas.getContext('2d');
					this.coords = {};
					this.init();
				}

				init() {
					this.canvas.width = window.innerWidth;
					this.canvas.height = window.innerHeight;
					this.ctx.strokeWidth = 1;

					this.ctx.beginPath();
					this.ctx.moveTo(this.canvas.width/2, 0);
					this.ctx.lineTo(this.canvas.width/2, this.canvas.height);

					this.ctx.moveTo(0, this.canvas.height/2);
					this.ctx.lineTo(this.canvas.width, this.canvas.height/2);
					this.ctx.closePath();

					this.ctx.stroke();
					this.ctx.fillStyle = 'rgb(134, 152, 255)';
					this.addListeners();
					//this.drawLine(25, 14, 20, 2);
				}

				zoom(val) {
					return Math.round(val / PIXEL);
				}
				
				addListeners() {
					window.addEventListener('resize', () => {
						this.init();
					});
					
					this.canvas.addEventListener('click', event => {
						var x = this.zoom(event.clientX),
							y = this.zoom(event.clientY);

						if (this.coords.x)
							this.drawLine(this.coords.x, this.coords.y, x, y);

						this.coords = {
							x: this.zoom(event.clientX),
							y: this.zoom(event.clientY)
						};
					});
				}

				drawLine(x1, y1, x2, y2) {
					var deltaX = Math.abs(x2 - x1),
						deltaY = Math.abs(y2 - y1),
						signX = x1 < x2 ? 1 : -1,
						signY = y1 < y2 ? 1 : -1,
						d = deltaX > deltaY ? 2*deltaY - deltaX : 2*deltaX - deltaY;

					this.drawOriginalLine(x1, y1, x2, y2);
					this.drawPixel(x2, y2);

					while (x1 != x2 || y1 != y2) {
						this.drawPixel(x1, y1);

						if (deltaX >= deltaY) {
							if (d > 0) {
								x1 += signX;
								y1 += signY;
								d += 2*deltaY - 2*deltaX;
							} else {
								x1 += signX;
								d += 2*deltaY;
							}
						} else {
							if (d > 0) {
								x1 += signX;
								y1 += signY;
								d += 2*deltaX - 2*deltaY;
							} else {
								y1 += signY;
								d += 2*deltaX;
							}
						}
					}
				}

				drawOriginalLine(x1, y1, x2, y2) {
					this.ctx.moveTo(x1*PIXEL, y1*PIXEL);
					this.ctx.lineTo(x2*PIXEL, y2*PIXEL);
				}

				drawPixel(x, y) {
					this.ctx.fillRect(x*PIXEL - PIXEL/2, y*PIXEL - PIXEL/2, PIXEL, PIXEL);
					this.ctx.stroke();
				}
			};
		</script>
	</body>
</html>